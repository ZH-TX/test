<!-- index.wxml -->
<view class="container">
  <!-- å¤´éƒ¨ -->
  <headers  bindmyEvent='changebar'></headers>
  <!-- ä¸»ä½“éƒ¨åˆ† -->
  <view class="scroll-content">
    <scroll-view 
          scroll-y  
          scroll-top='{{topNum}}' 
          style="height: 100%" 
          bindscrolltoupper="refresh" 
          bindscrolltolower="loadMore"  
          bindscroll="scrolltoupper">
    
      <!-- è¿›å…¥åˆ·æ–° -->
      <block wx:if="{{isRefresh}}">
        <loading hidden="{{!isRefresh}}">åŠ è½½ä¸­...</loading>
        <text class="is-refresh">æ­£åœ¨åˆ·æ–°æ•°æ®ğŸ˜€...</text>
      </block>
      <!-- ä¸»ä½“å†…å®¹ -->
      <block wx:for="{{topics}}" wx:key="unique" wx:for-item="topic">
        <view class="topic-item" >
          <!-- åˆ¤æ–­ç±»å‹ -->
          <view class="topic-h" bindtap="viewDetail" data-id="{{topic.id}}">
            
            <text class="topic-type top" wx:if="{{topic.top === true}}">ç½®é¡¶</text>
            <text class="topic-type jh" wx:if="{{topic.good === true}}">ç²¾å</text>
            <text class="topic-type ask" wx:if="{{topic.tab === 'ask'}}">é—®ç­”</text>
            <text class="topic-type share" wx:if="{{topic.tab === 'share'}}">åˆ†äº«</text>
            <text class="topic-type job" wx:if="{{topic.tab === 'job'}}">æ‹›è˜</text>
            {{topic.title}}
            <!-- <text class="topic-title" bindtap="viewDetail" data-id="{{topic.id}}">
              {{topic.title}}
            </text> -->
          </view>
          <view class="topic-more" bindtap="viewDetail" data-id="{{topic.id}}" >
            <image class="author-face" mode="aspectFit" src="{{topic.author.avatar_url}}"></image>
            <view class="text">
              <text>{{topic.author.loginname}}</text>
              <view class="topic-re-vi fr">
                <text class="re">{{topic.reply_count}}</text>/{{topic.visit_count}}
                
              </view>
            </view>
            <view class="text">
              <text class="time">æ—¶é—´ï¼š{{topic.create_at}} ,</text>
              <text class="fr"> {{topic.last_reply_at}}</text>
            </view>
          </view>
        </view>
      </block>
      <!-- åŠ è½½ -->
      <view class="is-loadMore">
        <text wx:if="{{isLoadMore}}">æ­£åœ¨åŠ è½½æ›´å¤šæ•°æ®...</text>
      </view>
    
    </scroll-view>
  </view>
  <!-- å›åˆ°é¡¶éƒ¨ -->   
</view>
<backtotop bindtap='toTop'  wx:if='{{floorstatus}}'   ></backtotop>